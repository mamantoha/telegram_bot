<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Crystal Docs 1.9.2">
<meta name="crystal_docs.project_version" content="0.5.0">
<meta name="crystal_docs.project_name" content="telegram_bot">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="telegram_bot">
  <title>telegram_bot 0.5.0</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill="currentColor" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<input type="checkbox" id="sidebar-btn">
<label for="sidebar-btn" id="sidebar-btn-label">
  <svg class="open" xmlns="http://www.w3.org/2000/svg" height="2em" width="2em" viewBox="0 0 512 512"><title>Open Sidebar</title><path fill="currentColor" d="M80 96v64h352V96H80zm0 112v64h352v-64H80zm0 112v64h352v-64H80z"></path></svg>
  <svg class="close" xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 512 512"><title>Close Sidebar</title><path fill="currentColor" d="m118.6 73.4-45.2 45.2L210.7 256 73.4 393.4l45.2 45.2L256 301.3l137.4 137.3 45.2-45.2L301.3 256l137.3-137.4-45.2-45.2L256 210.7Z"></path></svg>
</label>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          telegram_bot
        </a>
      </h1>

      <span class="project-version">
        0.5.0
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="telegram_bot/Fiber" data-name="fiber">
      <a href="Fiber.html">Fiber</a>
      
    </li>
  
  <li class="parent " data-id="telegram_bot/TelegramBot" data-name="telegrambot">
      <a href="TelegramBot.html">TelegramBot</a>
      
        <ul>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Animation" data-name="telegrambot::animation">
      <a href="TelegramBot/Animation.html">Animation</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/APIException" data-name="telegrambot::apiexception">
      <a href="TelegramBot/APIException.html">APIException</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Audio" data-name="telegrambot::audio">
      <a href="TelegramBot/Audio.html">Audio</a>
      
    </li>
  
  <li class="parent " data-id="telegram_bot/TelegramBot/Bot" data-name="telegrambot::bot">
      <a href="TelegramBot/Bot.html">Bot</a>
      
        <ul>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Bot/ReplyMarkup" data-name="telegrambot::bot::replymarkup">
      <a href="TelegramBot/Bot/ReplyMarkup.html">ReplyMarkup</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/BotCommand" data-name="telegrambot::botcommand">
      <a href="TelegramBot/BotCommand.html">BotCommand</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/CallbackGame" data-name="telegrambot::callbackgame">
      <a href="TelegramBot/CallbackGame.html">CallbackGame</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/CallbackQuery" data-name="telegrambot::callbackquery">
      <a href="TelegramBot/CallbackQuery.html">CallbackQuery</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Chat" data-name="telegrambot::chat">
      <a href="TelegramBot/Chat.html">Chat</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/ChatMember" data-name="telegrambot::chatmember">
      <a href="TelegramBot/ChatMember.html">ChatMember</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/ChatPhoto" data-name="telegrambot::chatphoto">
      <a href="TelegramBot/ChatPhoto.html">ChatPhoto</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/ChosenInlineResult" data-name="telegrambot::choseninlineresult">
      <a href="TelegramBot/ChosenInlineResult.html">ChosenInlineResult</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/CmdHandler" data-name="telegrambot::cmdhandler">
      <a href="TelegramBot/CmdHandler.html">CmdHandler</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Contact" data-name="telegrambot::contact">
      <a href="TelegramBot/Contact.html">Contact</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Document" data-name="telegrambot::document">
      <a href="TelegramBot/Document.html">Document</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/File" data-name="telegrambot::file">
      <a href="TelegramBot/File.html">File</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/ForceReply" data-name="telegrambot::forcereply">
      <a href="TelegramBot/ForceReply.html">ForceReply</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Game" data-name="telegrambot::game">
      <a href="TelegramBot/Game.html">Game</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/GameHighScore" data-name="telegrambot::gamehighscore">
      <a href="TelegramBot/GameHighScore.html">GameHighScore</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/HttpClient" data-name="telegrambot::httpclient">
      <a href="TelegramBot/HttpClient.html">HttpClient</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineKeyboardButton" data-name="telegrambot::inlinekeyboardbutton">
      <a href="TelegramBot/InlineKeyboardButton.html">InlineKeyboardButton</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineKeyboardMarkup" data-name="telegrambot::inlinekeyboardmarkup">
      <a href="TelegramBot/InlineKeyboardMarkup.html">InlineKeyboardMarkup</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQuery" data-name="telegrambot::inlinequery">
      <a href="TelegramBot/InlineQuery.html">InlineQuery</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResult" data-name="telegrambot::inlinequeryresult">
      <a href="TelegramBot/InlineQueryResult.html">InlineQueryResult</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultArticle" data-name="telegrambot::inlinequeryresultarticle">
      <a href="TelegramBot/InlineQueryResultArticle.html">InlineQueryResultArticle</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultAudio" data-name="telegrambot::inlinequeryresultaudio">
      <a href="TelegramBot/InlineQueryResultAudio.html">InlineQueryResultAudio</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultCachedAudio" data-name="telegrambot::inlinequeryresultcachedaudio">
      <a href="TelegramBot/InlineQueryResultCachedAudio.html">InlineQueryResultCachedAudio</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultCachedDocument" data-name="telegrambot::inlinequeryresultcacheddocument">
      <a href="TelegramBot/InlineQueryResultCachedDocument.html">InlineQueryResultCachedDocument</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultCachedGif" data-name="telegrambot::inlinequeryresultcachedgif">
      <a href="TelegramBot/InlineQueryResultCachedGif.html">InlineQueryResultCachedGif</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultCachedMpeg4Gif" data-name="telegrambot::inlinequeryresultcachedmpeg4gif">
      <a href="TelegramBot/InlineQueryResultCachedMpeg4Gif.html">InlineQueryResultCachedMpeg4Gif</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultCachedPhoto" data-name="telegrambot::inlinequeryresultcachedphoto">
      <a href="TelegramBot/InlineQueryResultCachedPhoto.html">InlineQueryResultCachedPhoto</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultCachedSticker" data-name="telegrambot::inlinequeryresultcachedsticker">
      <a href="TelegramBot/InlineQueryResultCachedSticker.html">InlineQueryResultCachedSticker</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultCachedVideo" data-name="telegrambot::inlinequeryresultcachedvideo">
      <a href="TelegramBot/InlineQueryResultCachedVideo.html">InlineQueryResultCachedVideo</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultCachedVoice" data-name="telegrambot::inlinequeryresultcachedvoice">
      <a href="TelegramBot/InlineQueryResultCachedVoice.html">InlineQueryResultCachedVoice</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultContact" data-name="telegrambot::inlinequeryresultcontact">
      <a href="TelegramBot/InlineQueryResultContact.html">InlineQueryResultContact</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultDocument" data-name="telegrambot::inlinequeryresultdocument">
      <a href="TelegramBot/InlineQueryResultDocument.html">InlineQueryResultDocument</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultGif" data-name="telegrambot::inlinequeryresultgif">
      <a href="TelegramBot/InlineQueryResultGif.html">InlineQueryResultGif</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultLocation" data-name="telegrambot::inlinequeryresultlocation">
      <a href="TelegramBot/InlineQueryResultLocation.html">InlineQueryResultLocation</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultMpeg4Gif" data-name="telegrambot::inlinequeryresultmpeg4gif">
      <a href="TelegramBot/InlineQueryResultMpeg4Gif.html">InlineQueryResultMpeg4Gif</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultPhoto" data-name="telegrambot::inlinequeryresultphoto">
      <a href="TelegramBot/InlineQueryResultPhoto.html">InlineQueryResultPhoto</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultVenue" data-name="telegrambot::inlinequeryresultvenue">
      <a href="TelegramBot/InlineQueryResultVenue.html">InlineQueryResultVenue</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultVideo" data-name="telegrambot::inlinequeryresultvideo">
      <a href="TelegramBot/InlineQueryResultVideo.html">InlineQueryResultVideo</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InlineQueryResultVoice" data-name="telegrambot::inlinequeryresultvoice">
      <a href="TelegramBot/InlineQueryResultVoice.html">InlineQueryResultVoice</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InputContactMessageContent" data-name="telegrambot::inputcontactmessagecontent">
      <a href="TelegramBot/InputContactMessageContent.html">InputContactMessageContent</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InputLocationMessageContent" data-name="telegrambot::inputlocationmessagecontent">
      <a href="TelegramBot/InputLocationMessageContent.html">InputLocationMessageContent</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InputMedia" data-name="telegrambot::inputmedia">
      <a href="TelegramBot/InputMedia.html">InputMedia</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InputMediaPhoto" data-name="telegrambot::inputmediaphoto">
      <a href="TelegramBot/InputMediaPhoto.html">InputMediaPhoto</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InputMediaVideo" data-name="telegrambot::inputmediavideo">
      <a href="TelegramBot/InputMediaVideo.html">InputMediaVideo</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InputMessageContent" data-name="telegrambot::inputmessagecontent">
      <a href="TelegramBot/InputMessageContent.html">InputMessageContent</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InputTextMessageContent" data-name="telegrambot::inputtextmessagecontent">
      <a href="TelegramBot/InputTextMessageContent.html">InputTextMessageContent</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/InputVenueMessageContent" data-name="telegrambot::inputvenuemessagecontent">
      <a href="TelegramBot/InputVenueMessageContent.html">InputVenueMessageContent</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Invoice" data-name="telegrambot::invoice">
      <a href="TelegramBot/Invoice.html">Invoice</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/KeyboardButton" data-name="telegrambot::keyboardbutton">
      <a href="TelegramBot/KeyboardButton.html">KeyboardButton</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/LabeledPrice" data-name="telegrambot::labeledprice">
      <a href="TelegramBot/LabeledPrice.html">LabeledPrice</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Location" data-name="telegrambot::location">
      <a href="TelegramBot/Location.html">Location</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/MaskPosition" data-name="telegrambot::maskposition">
      <a href="TelegramBot/MaskPosition.html">MaskPosition</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Message" data-name="telegrambot::message">
      <a href="TelegramBot/Message.html">Message</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/MessageEntity" data-name="telegrambot::messageentity">
      <a href="TelegramBot/MessageEntity.html">MessageEntity</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/OrderInfo" data-name="telegrambot::orderinfo">
      <a href="TelegramBot/OrderInfo.html">OrderInfo</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/PhotoSize" data-name="telegrambot::photosize">
      <a href="TelegramBot/PhotoSize.html">PhotoSize</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/PreCheckoutQuery" data-name="telegrambot::precheckoutquery">
      <a href="TelegramBot/PreCheckoutQuery.html">PreCheckoutQuery</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/ReplyKeyboardMarkup" data-name="telegrambot::replykeyboardmarkup">
      <a href="TelegramBot/ReplyKeyboardMarkup.html">ReplyKeyboardMarkup</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/ReplyKeyboardRemove" data-name="telegrambot::replykeyboardremove">
      <a href="TelegramBot/ReplyKeyboardRemove.html">ReplyKeyboardRemove</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/ResponseClient" data-name="telegrambot::responseclient">
      <a href="TelegramBot/ResponseClient.html">ResponseClient</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/ShippingAddress" data-name="telegrambot::shippingaddress">
      <a href="TelegramBot/ShippingAddress.html">ShippingAddress</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/ShippingOption" data-name="telegrambot::shippingoption">
      <a href="TelegramBot/ShippingOption.html">ShippingOption</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/ShippingQuery" data-name="telegrambot::shippingquery">
      <a href="TelegramBot/ShippingQuery.html">ShippingQuery</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Sticker" data-name="telegrambot::sticker">
      <a href="TelegramBot/Sticker.html">Sticker</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/StickerSet" data-name="telegrambot::stickerset">
      <a href="TelegramBot/StickerSet.html">StickerSet</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/SuccessfulPayment" data-name="telegrambot::successfulpayment">
      <a href="TelegramBot/SuccessfulPayment.html">SuccessfulPayment</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Update" data-name="telegrambot::update">
      <a href="TelegramBot/Update.html">Update</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/User" data-name="telegrambot::user">
      <a href="TelegramBot/User.html">User</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/UserProfilePhoto" data-name="telegrambot::userprofilephoto">
      <a href="TelegramBot/UserProfilePhoto.html">UserProfilePhoto</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Venue" data-name="telegrambot::venue">
      <a href="TelegramBot/Venue.html">Venue</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Video" data-name="telegrambot::video">
      <a href="TelegramBot/Video.html">Video</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/VideoNote" data-name="telegrambot::videonote">
      <a href="TelegramBot/VideoNote.html">VideoNote</a>
      
    </li>
  
  <li class=" " data-id="telegram_bot/TelegramBot/Voice" data-name="telegrambot::voice">
      <a href="TelegramBot/Voice.html">Voice</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1><a id="telegram-bot" class="anchor" href="#telegram-bot">  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>TelegramBot</h1>
<p><a href="https://github.com/mamantoha/telegram_bot/actions/workflows/crystal.yml"><img src="https://github.com/mamantoha/telegram_bot/actions/workflows/crystal.yml/badge.svg" alt="Crystal CI" /></a>
<a href="https://github.com/mamantoha/telegram_bot/releases"><img src="https://img.shields.io/github/release/mamantoha/telegram_bot.svg" alt="GitHub release" /></a>
<a href="https://mamantoha.github.io/telegram_bot/"><img src="https://img.shields.io/badge/docs-available-brightgreen.svg" alt="Docs" /></a>
<a href="https://github.com/mamantoha/telegram_bot/blob/develop/LICENSE"><img src="https://img.shields.io/github/license/mamantoha/telegram_bot.svg" alt="License" /></a></p>
<p><a href="https://core.telegram.org/bots/api">Telegram Bot API</a> (3.2) wrapper for Crystal</p>
<blockquote>
<p>This is a fork of <a href="https://github.com/hangyas/telegram_bot">telegram_bot</a> which was originally written by Krisztián Ádám.</p>
<p>The original repository is no longer maintained and does not work with the latest Crystal version.</p>
</blockquote>
<h2><a id="current-features" class="anchor" href="#current-features">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Current features</h2>
<p>api methods and types:</p>
<ul>
<li>[x] basic message types</li>
<li>[x] stickers</li>
<li>[x] inline mode</li>
<li>[x] payments</li>
<li>[x] games</li>
</ul>
<p>getting updates:</p>
<ul>
<li>[x] long polling</li>
<li>[x] webhooks</li>
</ul>
<p>additional features:</p>
<ul>
<li>[x] allow &amp; block lists</li>
<li>[x] command handler</li>
</ul>
<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h2>
<p>Create your bot by inheriting from <code><a href="TelegramBot/Bot.html">TelegramBot::Bot</a></code>.</p>
<h3><a id="commands" class="anchor" href="#commands">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Commands</h3>
<p>Define which commands your bot handles via the <code>cmd</code> method in the <code>CmdHandler</code> module. For example, respond <code>world</code> to <code>/hello</code> and perform simple calculation with <code>/add</code>:</p>
<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;telegram_bot&quot;</span>

<span class="k">class</span> <span class="t">MyBot</span> <span class="o">&lt;</span> <span class="t">TelegramBot</span><span class="t">::</span><span class="t">Bot</span>
  <span class="k">include</span> <span class="t">TelegramBot</span><span class="t">::</span><span class="t">CmdHandler</span>

  <span class="k">def</span> <span class="m">initialize</span>
    <span class="k">super</span>(<span class="s">&quot;MyBot&quot;</span>, <span class="t">TOKEN</span>)

    cmd <span class="s">&quot;hello&quot;</span> <span class="k">do</span> <span class="o">|</span>msg<span class="o">|</span>
      reply msg, <span class="s">&quot;world!&quot;</span>
    <span class="k">end</span>

    <span class="c"># /add 5 7 =&gt; 12</span>
    cmd <span class="s">&quot;add&quot;</span> <span class="k">do</span> <span class="o">|</span>msg, params<span class="o">|</span>
      reply msg, <span class="s">&quot;</span><span class="i">#{</span>params[<span class="n">0</span>].to_i <span class="o">+</span> params[<span class="n">1</span>].to_i<span class="i">}</span><span class="s">&quot;</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

my_bot <span class="o">=</span> <span class="t">MyBot</span>.new
my_bot.polling</code></pre>
<h3><a id="logging" class="anchor" href="#logging">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Logging</h3>
<pre><code class="language-crystal"><span class="t">MyBot</span><span class="t">::</span><span class="t">Log</span>.level <span class="o">=</span> <span class="n">:debug</span>
<span class="t">MyBot</span><span class="t">::</span><span class="t">Log</span>.backend <span class="o">=</span> <span class="t">::</span><span class="t">Log</span><span class="t">::</span><span class="t">IOBackend</span>.new

my_bot <span class="o">=</span> <span class="t">MyBot</span>.new
my_bot.polling</code></pre>
<h3><a id="custom-handlers" class="anchor" href="#custom-handlers">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Custom handlers</h3>
<p>Override any of the following <code>handle</code> methods to handle Telegram updates, be it <a href="https://core.telegram.org/bots/api#message">messages</a>, <a href="https://core.telegram.org/bots/api#inlinequery">inline queries</a>, <a href="https://core.telegram.org/bots/api#choseninlineresult">chosen inline results</a> or <a href="https://core.telegram.org/bots/api#callbackquery">callback queries</a>:</p>
<pre><code class="language-crystal"><span class="k">def</span> <span class="m">handle</span>(message : <span class="t">Message</span>)

<span class="k">def</span> <span class="m">handle</span>(inline_query : <span class="t">InlineQuery</span>)

<span class="k">def</span> <span class="m">handle</span>(chosen_inline_result : <span class="t">ChosenInlineResult</span>)

<span class="k">def</span> <span class="m">handle</span>(callback_query : <span class="t">CallbackQuery</span>)

<span class="k">def</span> <span class="m">handle_edited</span>(message : <span class="t">Message</span>)

<span class="k">def</span> <span class="m">handle_channel_post</span>(message : <span class="t">Message</span>)

<span class="k">def</span> <span class="m">handle_edited_channel_post</span>(message : <span class="t">Message</span>)</code></pre>
<p>For example, to echo all messages sent to the bot:</p>
<pre><code class="language-crystal"><span class="k">class</span> <span class="t">EchoBot</span> <span class="o">&lt;</span> <span class="t">TelegramBot</span><span class="t">::</span><span class="t">Bot</span>
  <span class="k">def</span> <span class="m">handle</span>(message : <span class="t">Message</span>)
    <span class="k">if</span> text <span class="o">=</span> message.text
      reply message, text
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">EchoBot</span>.new.polling</code></pre>
<p>Or to answer inline queries with a list of articles:</p>
<pre><code class="language-crystal"><span class="k">class</span> <span class="t">InlineBot</span> <span class="o">&lt;</span> <span class="t">TelegramBot</span><span class="t">::</span><span class="t">Bot</span>
  <span class="k">def</span> <span class="m">handle</span>(inline_query : <span class="t">TelegramBot</span><span class="t">::</span><span class="t">InlineQuery</span>)
    results <span class="o">=</span> <span class="t">Array</span>(<span class="t">TelegramBot</span><span class="t">::</span><span class="t">InlineQueryResult</span>).new

    content <span class="o">=</span> <span class="t">InputTextMessageContent</span>.new <span class="s">&quot;Article details&quot;</span>
    results <span class="o">&lt;&lt;</span> <span class="t">TelegramBot</span><span class="t">::</span><span class="t">InlineQueryResultArticle</span>.new(<span class="s">&quot;article/1&quot;</span>, <span class="s">&quot;My first article&quot;</span>, content)

    answer_inline_query(inline_query.id, results)
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">InlineBot</span>.new.polling</code></pre>
<p>Remember to <a href="https://core.telegram.org/bots/api#inline-mode">enable inline mode</a> in BotFather to support inline queries.</p>
<h3><a id="webhooks" class="anchor" href="#webhooks">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Webhooks</h3>
<p>All the examples above use the <a href="https://core.telegram.org/bots/api#getupdates"><code>getUpdates</code></a> method, constantly polling Telegram for new updates, by invoking the <code>polling</code> method on the bot.</p>
<p>Another option is to use the <a href="https://core.telegram.org/bots/api#setwebhook"><code>setWebhook</code></a> method to tell Telegram where to POST any updates for your bot. Note that you <strong>must</strong> use HTTPS in this endpoint for Telegram to work, and you can use a self-signed certificate, which you can provide as part of the <code>setWebhook</code> method:</p>
<pre><code class="language-crystal"><span class="c"># Certificate has the contents of the certificate, not the path to it</span>
bot.set_webhook(url, certificate)</code></pre>
<p>After invoking <code>setWebhook</code>, have your bot start an HTTPS server with the <code>serve</code> command:</p>
<pre><code class="language-crystal">bot.serve(<span class="s">&quot;0.0.0.0&quot;</span>, <span class="n">443</span>, <span class="s">&quot;path/to/ssl/certificate&quot;</span>, <span class="s">&quot;path/to/ssl/key&quot;</span>)</code></pre>
<p>If you run your bot behind a proxy that performs SSL offloading (ie the proxy presents the certificate to Telegram, and then forwards the request to your app using plain HTTP), you may skip the last two parameters, and the bot will listen for HTTP requests instead of HTTPS.</p>
<p>When running your bot in <code>serve</code> mode, the bot will favour executing any methods by sending a response as part of the Telegram request, rather than executing a new request.</p>
<h3><a id="allowblocklists" class="anchor" href="#allowblocklists">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Allow/blocklists</h3>
<p>However it's not part of the API you can set block or allow lists in the bot's constructor to filter your users by username.</p>
<p><code>allowlist</code>: if user is not present on the list (or doesn't have username) the message won't be handled</p>
<p><code>blocklist</code>: if user is present on the list the message won't be handled</p>
<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>
<p>Add this to your application's <code>shard.yml</code>:</p>
<pre><code class="language-yaml">dependencies:
  telegram_bot:
    github: mamantoha/telegram_bot</code></pre>
<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>
<p><strong>Contributing is very welcomed!</strong></p>
<ol>
<li>Fork it ( https://github.com/mamantoha/TelegramBot/fork )</li>
<li>Create your feature branch (git checkout -b my-new-feature)</li>
<li>Commit your changes (git commit -am 'Add some feature')</li>
<li>Push to the branch (git push origin my-new-feature)</li>
<li>Create a new Pull Request</li>
</ol>
<h2><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h2>
<ul>
<li><a href="https://github.com/hangyas">hangyas</a> Krisztián Ádám - creator, maintainer</li>
<li><a href="https://github.com/mamantoha">mamantoha</a> Anton Maminov - maintainer</li>
</ul>
</div>
</body>
</html>
